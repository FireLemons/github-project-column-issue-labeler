on:
  workflow_dispatch:

jobs:
  label_issues:
    runs-on: ubuntu-latest
    name: Manage Issue Labels
    steps:
      - uses: actions/checkout@main
        with:
          submodules: 'true'
      - uses: ./github-project-column-issue-labeler/
        id: manage-project-issue-labels
        name: Manage Project Issue Labels
        with:
          column_label_config: >  
            [
              {
                "columnName": "Name with whitespace ",
                "labelingRules": [
                  {
                    "action": "AdD",
                    "labels": ["Duplicate Label", "New"]
                  },
                  {
                    "action": "SeT",
                    "labels": ["This should not appear"]
                  },
                  {
                    "action": "ADD ",
                    "labels": ["DuplIcate LaBeL    ", "Help Wanted"]
                  },
                  {
                    "action": "ReMovE",
                    "labels": ["Duplicate emoji üêå ", "   Completed"]
                  },
                  {
                    "action": "ReMOVE",
                    "labels": ["DupliCAte Emoji üêå", "Completed 1"]
                  },
                  {
                    "action": "  Set",
                    "labels": ["This should appear", "üõ© duplicate", "üõ© duplicate", "alphabetically first"]
                  }
                ]
              }
            ]
          token: ${{secrets.GITHUB_TOKEN}}

# Result: 

#          Validating Config
#            Checking column at index 0
#              Checking labeling rule at index 0
#              Checking labeling rule at index 1
#              Checking labeling rule at index 2
#              Checking labeling rule at index 3
#              Checking labeling rule at index 4
#              Checking labeling rule at index 5
#              Found SET labeling rule at index: 5
#              The column will be using only this rule
#                Labels for action SET were found to have duplicate labels
#                Removed duplicate labels
#          validatedConfig:
#          [
#            {
#              "columnName": "Name with whitespace",
#              "labelingRules": [
#                {
#                  "action": "SET",
#                  "labels": [
#                    "üõ© duplicate",
#                    "alphabetically first",
#                    "This should appear"
#                  ]
#                }
#              ]
#            }
#          ]