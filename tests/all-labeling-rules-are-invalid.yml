on:
  workflow_dispatch:

jobs:
  label_issues:
    runs-on: ubuntu-latest
    name: Manage Issue Labels
    steps:
      - uses: actions/checkout@main
        with:
          submodules: 'true'
      - uses: ./github-project-column-issue-labeler/
        id: manage-project-issue-labels
        name: Manage Project Issue Labels
        with:
          column_label_config: >
            [
              {
                "columnName": "Name",
                "labelingRules": []
              },
              {
                "columnName": "Name",
                "labelingRules": [
                  {
                  },
                  {
                    "action": "ADD"
                  },
                  {
                    "labels": ["a", "b", "c"]
                  },
                  {
                    "action": 3,
                    "labels": ["a", "b", "c"]
                  },
                  {
                    "action": "ADD",
                    "labels": {
                      "a": "a"
                    }
                  },
                  {
                    "action": "Unsupported Action",
                    "labels": ["a", "b", "c"]
                  }
                ]
              }
            ]
          token: ${{secrets.GITHUB_TOKEN}}

# Result:

#          Validating Config
#            Checking column at index 0
# Warning:     Column configuration at index: 0 did not contain any valid labeling rules. Skipping column.
#            Checking column at index 1
#              Checking labeling rule at index 0
# Warning:       Could not make valid labeling rule from value at index: 0
# Error:           key "action" was not found in the object
#              Checking labeling rule at index 1
# Warning:       Could not make valid labeling rule from value at index: 1
# Error:           key "labels" was not found in the object
#              Checking labeling rule at index 2
# Warning:       Could not make valid labeling rule from value at index: 2
# Error:           key "action" was not found in the object
#              Checking labeling rule at index 3
# Warning:       Could not make valid labeling rule from value at index: 3
# Error:           Member "action" was found not to be a string
#              Checking labeling rule at index 4
# Warning:       Could not make valid labeling rule from value at index: 4
# Error:           Member "labels" was found not to be an array
#              Checking labeling rule at index 5
# Warning:       Could not make valid labeling rule from value at index: 5
# Error:           Labeling action "UNSUPPORTED ACTION" is not supported. Supported actions are: ["ADD","REMOVE","SET"]
# Warning:     Column configuration at index: 1 did not contain any valid labeling rules. Skipping column.
# Error:   Could not find any valid actions to perform from the configuration